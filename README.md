# FXCM Connector v3

## Призначення

Конектор отримує історію 5m з брокера, будує похідні TF локально та зберігає все в JSONL.
База TF:

- 5m — з брокера.
- 4h / 1d — з брокера як «джерело істини».
- 15m–1h — похідні з 5m.

## Вимоги

- Python 3.7 у .venv

## Структура даних

- data_v3/<SYMBOL>/tf_<TF>/part-YYYYMMDD.jsonl — основні дані
- History/ — довільна історія/експерименти (не для репо)

## Запуск polling

- Активуйте .venv.
- Запустіть конектор:
  - python -m app.main_connector

## Налаштування

Основні параметри знаходяться у config.json:

- broker_base_tfs_s — базові TF з брокера (4h/1d)
- derived_tfs_s — похідні TF (15m–1h)
- day_anchor_offset_s та *alt* — якорі сесії

Календарі задаються групами:

- market_calendar_by_group — параметри календаря для групи
- market_calendar_symbol_groups — мапінг символ → група

Модель підтримує лише одну daily break пару на групу (UTC).

## Git та дані

- Дані в data_v3 і History не зберігаються у репо.
- Для синхронізації даних використовуйте окреме сховище (наприклад, архів або зовнішній диск).

## Стиснення (план)

Планується опційне стиснення JSONL (gzip/zstd) із прозорим читанням.
